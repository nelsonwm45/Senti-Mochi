## Relevant Files

- `/home/ubuntu/Mochi/backend/app/models.py` - Main file to define new DB models (Company, Filing, NewsArticle, etc.).
- `/home/ubuntu/Mochi/backend/app/auth.py` - To be updated with Role-Based Access Control (RBAC) logic.
- `/home/ubuntu/Mochi/backend/alembic/versions/*` - New migration files generated by Alembic.
- `/home/ubuntu/Mochi/backend/tests/test_rbac.py` - New test file to verify RBAC logic.

### Notes

- Unit tests should be placed in `backend/tests/`.
- Use `pytest` to run tests for the backend.

## Instructions for Completing Tasks

**IMPORTANT:** As you complete each task, you must check it off in this markdown file by changing `- [ ]` to `- [x]`. This helps track progress and ensures you don't skip any steps.

Example:
- `- [ ] 1.1 Read file` â†’ `- [x] 1.1 Read file` (after completing)

Update the file after completing each sub-task, not just after completing an entire parent task.

## Tasks

- [x] 0.0 Create feature branch
  - [x] 0.1 Create and checkout a new branch `feature/phase1-foundation`
- [x] 1.0 Implement Data Models
  - [x] 1.1 Update `backend/app/models.py` to add `Company` model with unique ticker index.
  - [x] 1.2 Update `backend/app/models.py` to add `Filing` model (linked to Company).
  - [x] 1.3 Update `backend/app/models.py` to add `NewsArticle` model.
  - [x] 1.4 Update `backend/app/models.py` to add `SentimentAnalysis` model (polymorphic or text-linked).
  - [x] 1.5 Update `backend/app/models.py` to add `FinancialRatio` and `Alert` models.
  - [x] 1.6 Run `alembic revision --autogenerate -m "Add financial models"` to create migration.
  - [x] 1.7 Run `alembic upgrade head` to apply schema changes to DB.
- [x] 2.0 Implement RBAC (Role-Based Access Control)
  - [x] 2.1 Update `UserRole` enum in `models.py` to include RM, ANALYST, RISK.
  - [x] 2.2 Create migration for the updated Enum type (if needed) or handle application-side.
  - [x] 2.3 Modify `backend/app/auth.py` to add a dependency `require_role(role: UserRole)`.
  - [x] 2.4 Update `backend/app/routers/users.py` (or similar) to restrict specific routes to ADMIN only.
- [x] 3.0 Verify Implementation (Manual & Test)
  - [x] 3.1 Create a test script `backend/tests/test_rbac_manual.py` to verify a "User" cannot access "Admin" routes.
  - [x] 3.2 Manually verify database tables exist using `psql` or `check_db_content.py`.
